# Terraform 開発環境

## 概要

Terraformコードの開発・静的解析を行うためのdevcontainer環境です。

## 含まれるツール

| ツール | バージョン | 用途 |
|--------|------------|------|
| Terraform | 1.14.3 | IaC 実行 |
| tflint | 0.60.0 | Terraform リンター |
| checkov | 最新 | セキュリティスキャナー |

## フォーマット

### 自動フォーマット（推奨）

ファイル保存時（Ctrl+S）に自動でフォーマットが実行されます。

VSCode 拡張機能「HashiCorp Terraform」により、以下が自動適用されます。

- インデント: 2スペース
- `=` の位置揃え
- 末尾改行の挿入
- 末尾空白の削除

### 手動フォーマット

```bash
# チェックのみ（差分表示）
terraform fmt -check -diff

# フォーマット実行
terraform fmt
```

## 静的解析

### tflint

Terraform のベストプラクティス違反や非推奨構文を検出します。

```bash
tflint --config /root/.tflint.hcl
```

検出例:

- 未使用の変数・ローカル値
- 非推奨のリソース属性
- AWS リソースの設定ミス

### checkov

セキュリティ・コンプライアンス違反を検出します。

```bash
checkov -f <ファイル名>

# ディレクトリ全体をスキャン
checkov -d .
```

検出例:

- セキュリティグループの過剰な開放（0.0.0.0/0）
- S3 バケットの暗号化・バージョニング未設定
- パブリックアクセスブロック未設定
